# Query Test Results

	GET tests/:id

## Description
Returns detailed stats of a test

***

## Return format
A JSON object containing the following key/value pairs no matter the test type

- **id** - Test ID
- **meta_data** - [Metadata](https://github.com/han-hgu/perf-prototype/blob/master/api-documentation/terms.md#metadata) describing the test run  
- **app_stats** - [Statistics for the application server](https://github.com/han-hgu/perf-prototype/blob/master/api-documentation/terms.md#application-server-statistics)
- **db_stats** - [Statistics for the database server](https://github.com/han-hgu/perf-prototype/blob/master/api-documentation/terms.md#database-server-statistics)

### Rating result additional information
For rating test type, the following information is also returned

- **udr\_rate\_avg** - The average UDR rate for the entire run, it is shown after the test is completed, float
- **udr_created** - The number of UDRs generated by the rating system so far, integer
- **udr\_exception\_created** - The number of UDR exceptions generated by the rating system so far, integer
- **files_completed** - The number of rating input files processed so far, integer
- **rates** - Real-time rates per collection interval, float array
- **udr\_created\_trend** - The number of UDRs generated up to this point, this JSON array holds the stats for every collection interval up to now


### Billing result additional information
For billing test type, the following information is also returned

- **owner_name** - The owner name of the bill run
- **billing_duration** - The duration of the billing process
- **invoice\_render_duration** - The duration of the invoice rendering process
- **user\_package_billed** - The total number of billed user packages
- **user\_package\_bill_rate** - The user package bill rate per collection interval, float array


***

## Errors
- **400 Bad Request** - Test does not exist

***
## Example
### Billing

**Request**

	v1/tests/596f75c38a8fd50f3cc87289

**Return** __shortened for example purpose__

	{
		"id": "596f75c38a8fd50f3cc87289",
		"meta_data": {
			"test_type": "billing",
			"start_date": "2017-07-19T11:07:47.465-04:00",
			"test_completed": true,
			"test_duration": "51m13.81s",
			"tags": [
				"8.5.26.5",
				"Momentum",
				"billing",
				"Hotfix.6",
				"TS-4942",
				"Momentum_Voice"
			],
			"comment": "Ran updated UDRBillerFixer from TS-4942, start-end: 8/1/2016-9/1/2016",
			"collection_interval": "30s",
			"app_param": {
				"version": "EngageIP 8.5.26.5-Hotfix.6RC28",
				"EIP_option": [],
				"perfmon_url": "http://192.168.1.51:5000/v1/stats",
				"sys_info": null,
				"additional_info": {
					"CPU": "Intel(R) Xeon(R) CPU E5-2680 v3 @ 2.50GHz, 2500 Mhz, 8 Core(s), 8 Logical Processor(s)",
					"OS": "Microsoft Windows Server 2012 R2 Datacenter",
					"RAM": "85.9 GB",
					"VM": "True",
					"comment": "Specs from Windows System Information",
					"system_model": "Virtual Machine"
				}
			},
			"db_param": {
				"db_name": "EngageIP_Revenue",
				"perfmon_url": "http://192.168.1.47:5000/v1/stats",
				"compatibility_level": 110,
				"sys_info": null,
				"additional_info": {
					"CPU": "2 x Intel(R) Xeon(R) CPU E5-2680 v3 @ 2.50GHz, 2500 Mhz, 12 Core(s), 24 Logical Processor(s)",
					"OS": "Microsoft Windows Server 2012 R2 Standard",
					"RAM": "256 GB",
					"comment": "Specs from Windows System Information",
					"system_model": "PowerEdge R730xd"
				}
			},
			"chart_title": "8.5.26.5-Hotfix.6RC28"
		},
		"app_stats": {
			"cpu(%)": [
				1.502076,
				2.9822624,
				3.8444085,
				...
			],
			"cpu_max(%)": 19.509226,
			"mem(%)": [
				3,
				20,
				5,
				...
			],
			"mem_max(%)": 4
		},
		"db_stats": {
			"cpu(%)": [
				14.140656,
				65.43892,
				59.07058,
				...
			],
			"cpu_max(%)": 68.26979,
			"mem_max(%)": 0,
			"logical_reads_total": 735742626,
			"logical_reads": [
				11557717,
				19993480,
				21982468,
				...
			],
			"logical_writes_total": 190154,
			"logical_writes": [
				3541,
				1928,
				3196,
				...
			],
			"physical_reads_total": 952222,
			"physical_reads": [
				111585,
				719,
				690,
				...
			]
		},
		"owner_name": "Momentum_Voice",
		"billing_duration": "45m41.93s",
		"invoice_render_duration": "5m31.53s"
	}

### Rating

**Request**

	v1/tests/596901ee8a8fd50ac009ab7e

**Return** __shortened for example purpose__

	{
		"id": "596901ee8a8fd50ac009ab7e",
		"meta_data": {
			"test_type": "rating",
			"start_date": "2017-07-14T13:39:58.613-04:00",
			"test_completed": true,
			"test_duration": "32m15.9656547s",
			"tags": [
				"8.5.26.5",
				"Momentum",
				"Rating",
				"Hotfix.6",
				"Broadworks",
				"TS-4240",
				"TS-3038",
				"TS-5139"
			],
			"comment": "Run 'exec [Support_AddBillersBucketsBulk] '20161101''",
			"collection_interval": "30s",
			"app_param": {
				"version": "EngageIP 8.5.26.5-Hotfix.6RC28",
				"EIP_option": [
					"LoadAllUDRLocalCallPattern=true",
					"FlushWriteQueueParallel=true",
					"MonthsToPreLoadBillersAndBuckets=14"
				],
				"perfmon_url": "http://192.168.1.51:5000/v1/stats",
				"sys_info": null,
				"additional_info": {
					"CPU": "Intel(R) Xeon(R) CPU E5-2680 v3 @ 2.50GHz, 2500 Mhz, 8 Core(s), 8 Logical Processor(s)",
					"OS": "Microsoft Windows Server 2012 R2 Datacenter",
					"RAM": "90 GB",
					"VM": "True",
					"comment": "Specs from Windows System Information",
					"feed": "Broadworks",
					"system_model": "Virtual Machine"
				}
			},
			"db_param": {
				"db_name": "EngageIP_NonRevenue",
				"perfmon_url": "http://192.168.1.47:5000/v1/stats",
				"compatibility_level": 110,
				"sys_info": null,
				"additional_info": {
					"CPU": "2 x Intel(R) Xeon(R) CPU E5-2680 v3 @ 2.50GHz, 2500 Mhz, 12 Core(s), 24 Logical Processor(s)",
					"OS": "Microsoft Windows Server 2012 R2 Standard",
					"RAM": "256 GB",
					"comment": "Specs from Windows System Information",
					"system_model": "PowerEdge R730xd"
				}
			},
			"chart_title": "8.5.26.5-Hotfix.6RC28"
		},
		"app_stats": {
			"cpu(%)": [
				0.4081931,
				12.514605,
				16.849483,
				...
			],
			"cpu_max(%)": 32.07753,
			"mem(%)": [
				6,
				9,
				10,
				...
			],
			"mem_max(%)": 30
		},
		"db_stats": {
			"cpu(%)": [
				0.00019475873,
				0.000018388715,
				0.0029186138,
				...
			],
			"cpu_max(%)": 12.8006115,
			"mem_max(%)": 0,
			"logical_reads_total": 1372165088,
			"logical_reads": [
				1447739,
				129597,
				4906968,
				...
			],
			"logical_writes_total": 126620,
			"logical_writes": [
				30,
				22,
				626,
				...
			],
			"physical_reads_total": 23193033,
			"physical_reads": [
				355470,
				63855,
				373973,
				...
			]
		},
		"udr_rate_avg": 83.900764,
		"udr_created": 162429,
		"udr_exception_created": 12163,
		"files_completed": 1549,
		"udr_rates": [
			0,
			0,
			0.06645499,
			...
		],
		"udr_created_trend": [
			0,
			0,
			2,
			7,
			18,
			60,
			220,
			...
		]
	}
